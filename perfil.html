<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil do Prestador - Serviços Toledo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5133424908957621"
     crossorigin="anonymous"></script>
     <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17500892314"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-17500892314');
</script>

  <style>
    /* Fade-in animation */
    .fade-in { opacity: 0; transform: translateY(20px); animation: fadeInUp 0.6s forwards; }
    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

    /* Card hover */
    .card-hover:hover { transform: translateY(-5px); transition: 0.3s; }

    /* Botão principal */
    .btn-primary { @apply bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300; }

    /* Tag de serviço */
    .tag { @apply bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold; }
  </style>
</head>
<body class="bg-gray-50 font-sans text-gray-800">

 <!-- Header fixo -->
  <!-- Header fixo -->
<header class="fixed top-0 inset-x-0 z-50 bg-gray-900 backdrop-blur border-b border-gray-200">
  <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
    <a href="index.html" class="flex items-center gap-2">
      <img src="images/logo.png" alt="Logo Serviços Toledo" class="h-8">
      <span class="text-2xl font-extrabold tracking-tight text-white">ServiçosToledo</span>
    </a>

    <!-- Menu Desktop -->
    <nav class="hidden md:flex items-center gap-8 text-white font-semibold">
      <a href="index.html" class="hover:text-white">Início</a>
      <a href="contato.html" class="hover:text-white">Contato</a>
      <a href="buscaprestador.html" class="hover:text-white">Buscar Prestador</a>
      <a href="servicos.html" class="hover:text-white">Verificar Serviços</a>
      <a href="prestadores.html"
         class="text-white bg-blue-600 px-4 py-2 rounded-lg hover:bg-blue-700 transition">
        Quero me cadastrar
      </a>

      <!-- Auth Section -->
      <div id="auth-desktop" class="flex items-center space-x-4">
        <!-- Botão login -->
        <a id="login-btn-desktop" href="login.html" 
           class="px-4 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition">
          Entrar
        </a>
        <!-- Info do usuário -->
        <div id="user-info-desktop" class="hidden items-center space-x-3">
          <img id="user-pic-desktop" class="w-8 h-8 rounded-full border" alt="User">
          <span id="user-name-desktop" class="text-white font-semibold"></span>
          <button id="logout-btn-desktop" 
            class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700">
            Sair
          </button>
        </div>
      </div>
    </nav>

    <!-- Botão menu mobile -->
    <button id="menuBtn"
      class="md:hidden inline-flex items-center justify-center h-10 w-10 rounded-lg border border-white hover:bg-gray-800">
      <svg class="h-5 w-5" fill="none" stroke="white" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-width="2" d="M4 8h16M4 16h16" />
      </svg>
    </button>
  </div>

  <!-- Menu Mobile -->
  <div id="mobileMenu" class="md:hidden hidden px-6 pb-4">
    <div class="flex flex-col gap-3 font-semibold">
      <a href="index.html" class="py-2 border-b text-white">Início</a>
      <a href="buscaprestador.html" class="py-2 border-b text-white">Buscar Prestador</a>
      <a href="contato.html" class="py-2 border-b text-white">Contato</a>
      <a href="servicos.html" class="py-2 border-b text-white">Verificar Serviços</a>
      <a href="prestadores.html" class="py-2 text-white bg-blue-600 rounded-lg text-center">Quero me cadastrar</a>

      <!-- Auth Section Mobile -->
      <div id="auth-mobile" class="flex items-center space-x-4">
        <a id="login-btn-mobile" href="login.html" 
           class="px-4 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition w-full text-center">
          Entrar
        </a>
        <div id="user-info-mobile" class="hidden items-center space-x-3 w-full justify-between">
          <div class="flex items-center gap-2">
            <img id="user-pic-mobile" class="w-8 h-8 rounded-full border" alt="User">
            <span id="user-name-mobile" class="text-white font-semibold"></span>
          </div>
          <button id="logout-btn-mobile" 
            class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700">
            Sair
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // Controle do menu mobile
  const menuBtn = document.getElementById('menuBtn');
  const mobileMenu = document.getElementById('mobileMenu');
  menuBtn.addEventListener('click', () => { 
    mobileMenu.classList.toggle('hidden'); 
  });

  // Função para carregar usuário
  function loadUser() {
    const user = JSON.parse(localStorage.getItem("user"));

    // Desktop
    const loginBtnDesktop = document.getElementById("login-btn-desktop");
    const userInfoDesktop = document.getElementById("user-info-desktop");
    const userNameDesktop = document.getElementById("user-name-desktop");
    const userPicDesktop = document.getElementById("user-pic-desktop");
    const logoutBtnDesktop = document.getElementById("logout-btn-desktop");

    // Mobile
    const loginBtnMobile = document.getElementById("login-btn-mobile");
    const userInfoMobile = document.getElementById("user-info-mobile");
    const userNameMobile = document.getElementById("user-name-mobile");
    const userPicMobile = document.getElementById("user-pic-mobile");
    const logoutBtnMobile = document.getElementById("logout-btn-mobile");

    if (user) {
      // Mostrar infos
      loginBtnDesktop.classList.add("hidden");
      userInfoDesktop.classList.remove("hidden");
      userNameDesktop.textContent = user.name;
      userPicDesktop.src = user.picture;

      loginBtnMobile.classList.add("hidden");
      userInfoMobile.classList.remove("hidden");
      userNameMobile.textContent = user.name;
      userPicMobile.src = user.picture;

      // Logout
      logoutBtnDesktop.addEventListener("click", () => {
        localStorage.removeItem("user");
        window.location.reload();
      });
      logoutBtnMobile.addEventListener("click", () => {
        localStorage.removeItem("user");
        window.location.reload();
      });
    }
  }

  document.addEventListener("DOMContentLoaded", loadUser);
</script>
  <!-- Main -->
  <main class="max-w-5xl mx-auto px-8 mt-40 fade-in">
    <div class="bg-white shadow-lg rounded-2xl p-8 md:p-10 card-hover">

      <!-- Header: avatar e nome -->
      <div class="flex flex-col md:flex-row items-center mb-6">
        <div class="w-28 h-28 bg-gray-200 rounded-full mr-6 flex items-center justify-center text-4xl text-gray-500 mb-4 md:mb-0" id="providerAvatar">?</div>
        <div class="flex-1">
          <h2 class="text-2xl font-bold" id="providerName"></h2>
          <p class="text-gray-600" id="providerProfession"></p>

          <!-- Avaliação -->
          <div class="flex items-center mt-2">
            <span class="text-yellow-500" id="providerRating">★★★★★</span>
            <span class="ml-2 text-gray-500" id="providerReviews">(0 avaliações)</span>
          </div>

          <!-- Tags de serviço -->
          <div class="flex flex-wrap gap-2 mt-2" id="providerTags">
            <!-- Tags serão inseridas via JS -->
          </div>
        </div>
      </div>

      <!-- Contatos e info -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <p><span class="font-semibold">E-mail:</span> <span id="providerEmail"></span></p>
        <p><span class="font-semibold">Telefone / WhatsApp:</span> <span id="providerPhone"></span></p>
        <p><span class="font-semibold">Cidade:</span> <span id="providerCity"></span></p>
        <p><span class="font-semibold">Bairros / Regiões atendidas:</span> <span id="providerAreas"></span></p>
        <p><span class="font-semibold">Disponibilidade:</span> <span id="providerAvailability"></span></p>
        <p><span class="font-semibold">Faixa de preço por hora:</span> <span id="providerHourlyRange"></span></p>
        <p><span class="font-semibold">Aceita chamados de emergência:</span> <span id="providerEmergency"></span></p>
      </div>

      <!-- Bio -->
      <div class="mb-6">
        <h3 class="font-semibold mb-2">Descrição / Experiência:</h3>
        <p class="text-gray-700" id="providerBio"></p>
      </div>

      <!-- Portfólio -->
      <div class="mb-6">
        <h3 class="font-semibold mb-2">Portfólio / Links:</h3>
        <a href="#" id="providerPortfolio" class="text-blue-600 hover:underline" target="_blank"></a>
      </div>

      <!-- Botão de solicitação -->
      <div class="text-center">
        <form action="https://formspree.io/f/xdkdqeor" method="POST" class="inline-block">
          <input type="hidden" name="prestador_nome" id="formName">
          <input type="hidden" name="prestador_email" id="formEmail">
          <input type="hidden" name="prestador_profissao" id="formProfession">
          <button type="submit" class="btn-primary text-lg">Solicitar Serviço</button>
        </form>
      </div>

    </div>
  </main>

  <!-- JS para popular perfil -->
  <script>
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return decodeURIComponent(urlParams.get(param) || '');
    }

    const name = getQueryParam('name');
    const profession = getQueryParam('profession');
    const email = getQueryParam('email');
    const phone = getQueryParam('phone');
    const city = getQueryParam('city');
    const areas = getQueryParam('areas');
    const availability = getQueryParam('availability');
    const hourly_range = getQueryParam('hourly_range');
    const emergency_ok = getQueryParam('emergency_ok');
    const bio = getQueryParam('bio');
    const portfolio = getQueryParam('portfolio');
    const tags = getQueryParam('tags'); // ex: "Eletricista,Pintor,Encanador"
    const rating = getQueryParam('rating') || '★★★★★';
    const reviews = getQueryParam('reviews') || '(0 avaliações)';

    document.getElementById('providerName').textContent = name;
    document.getElementById('providerProfession').textContent = profession;
    document.getElementById('providerEmail').textContent = email;
    document.getElementById('providerPhone').textContent = phone;
    document.getElementById('providerCity').textContent = city;
    document.getElementById('providerAreas').textContent = areas;
    document.getElementById('providerAvailability').textContent = availability;
    document.getElementById('providerHourlyRange').textContent = hourly_range;
    document.getElementById('providerEmergency').textContent = emergency_ok;
    document.getElementById('providerBio').textContent = bio;
    document.getElementById('providerRating').textContent = rating;
    document.getElementById('providerReviews').textContent = reviews;

    const portfolioEl = document.getElementById('providerPortfolio');
    if(portfolio) { portfolioEl.textContent = portfolio; portfolioEl.href = portfolio; }
    else { portfolioEl.textContent = 'Nenhum link fornecido'; portfolioEl.href = '#'; }

    // Tags
    const tagsContainer = document.getElementById('providerTags');
    if(tags){
      tags.split(',').forEach(tag => {
        const span = document.createElement('span');
        span.className = 'tag';
        span.textContent = tag.trim();
        tagsContainer.appendChild(span);
      });
    }

    // Formulário hidden
    document.getElementById('formName').value = name;
    document.getElementById('formEmail').value = email;
    document.getElementById('formProfession').value = profession;

    // Avatar inicial
    const avatarEl = document.getElementById('providerAvatar');
    avatarEl.textContent = name ? name.charAt(0).toUpperCase() : '?';
  </script>

</body>
</html>
